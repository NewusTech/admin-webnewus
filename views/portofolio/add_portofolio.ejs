<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta content="width=device-width, initial-scale=1, maximum-scale=1, shrink-to-fit=no" name="viewport">
  <title>Create New Portofolio &mdash; Stisla</title>

  <!-- General CSS Files -->
  <link rel="stylesheet" href="/assets/modules/bootstrap/css/bootstrap.min.css">
  <link rel="stylesheet" href="/assets/modules/fontawesome/css/all.min.css">

  <!-- Template CSS -->
  <link rel="stylesheet" href="/assets/css/style.css">
  <link rel="stylesheet" href="/assets/css/components.css">

  <!-- Start GA -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-94034622-3"></script>
  <script src="https://cdn.ckeditor.com/4.16.2/standard/ckeditor.js"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag() { dataLayer.push(arguments); }
    gtag('js', new Date());

    gtag('config', 'UA-94034622-3');
  </script>
  <!-- /END GA -->
</head>

<body>
  <div id="app">
    <!-- Sidebar -->
    <%- include('../sidebar.ejs') %>

      <!-- Main Content -->
      <div class="main-content">
        <section class="section">
          <div class="section-header">
            <div class="section-header-back">
              <a href="" class="btn btn-icon"><i class="fas fa-arrow-left"></i></a>
            </div>
            <h1>Create New Portofolio</h1>
            <div class="section-header-breadcrumb">
              <div class="breadcrumb-item active"><a href="#">Dashboard</a></div>
              <div class="breadcrumb-item"><a href="#">Posts</a></div>
              <div class="breadcrumb-item">Create New Post</div>
            </div>
          </div>

          <div class="section-body">
            <h2 class="section-title">New Portofolio</h2>
            <p class="section-lead">
              On this page you can create a new portofolio and fill in all fields.
            </p>

            <div class="row">
              <div class="col-12">
                <div class="card">
                  <div class="card-header">
                    <h4>Write Your Portofolio</h4>
                  </div>
                  <div class="card-body">
                    <form id="portofolioForm" enctype="multipart/form-data">
                      <input type="hidden" id="tokenInput" name="token">
                      <div class="form-group row mb-4">
                        <label class="col-form-label text-md-right col-12 col-md-3 col-lg-3">Title</label>
                        <div class="col-sm-12 col-md-7">
                          <input type="text" class="form-control" id="titleInput" name="title" oninput="generateSlug()" required>
                        </div>
                      </div>
                      <div class="form-group row mb-4">
                        <label class="col-form-label text-md-right col-12 col-md-3 col-lg-3">Slug</label>
                        <div class="col-sm-12 col-md-7">
                          <input type="text" class="form-control" id="slugInput" name="slug" required>
                        </div>
                      </div>
                      <div class="form-group row mb-4">
                        <label class="col-form-label text-md-right col-12 col-md-3 col-lg-3">Keyword</label>
                        <div class="col-sm-12 col-md-7">
                          <input type="text" class="form-control" name="keyword" required>
                        </div>
                      </div>
                      <div class="form-group row mb-4">
                        <label class="col-form-label text-md-right col-12 col-md-3 col-lg-3">Excerpt</label>
                        <div class="col-sm-12 col-md-7">
                          <input type="text" class="form-control" name="excerpt" required>
                        </div>
                      </div>
                      <div class="form-group row mb-4">
                        <label class="col-form-label text-md-right col-12 col-md-3 col-lg-3">Body</label>
                        <div class="col-sm-12 col-md-7">
                          <textarea name="body" id="body"></textarea>
                        </div>
                      </div>
                      <div class="form-group row mb-4">
                        <label class="col-form-label text-md-right col-12 col-md-3 col-lg-3">Nama Perusahaan</label>
                        <div class="col-sm-12 col-md-7">
                          <input type="text" class="form-control" name="portfolioYear">
                        </div>
                      </div>
                      <div class="form-group row mb-4">
                        <label class="col-form-label text-md-right col-12 col-md-3 col-lg-3">Tag Portofolio</label>
                        <div class="col-sm-12 col-md-7">
                          <select class="form-control selectric" name="TagportofolioId" id="">
                            <% tagData.forEach(function(tag) { %>
                            <option value="<%= tag.id %>"><%= tag.title %></option>
                            <% }); %>
                          </select>
                        </div>
                      </div>
                      <div class="form-group row mb-4">
                        <label class="col-form-label text-md-right col-12 col-md-3 col-lg-3">Kategori Portofolio</label>
                        <div class="col-sm-12 col-md-7">
                          <select class="form-control selectric" name="KategoriportofolioId" id="">
                            <% portofolioData.forEach(function(portfolioData) { %>
                            <option value="<%= portfolioData.id %>"><%= portfolioData.title %></option>
                            <% }); %>
                          </select>
                        </div>
                      </div>
                      <div class="form-group row mb-4">
                        <label class="col-form-label text-md-right col-12 col-md-3 col-lg-3">Technology Portofolio</label>
                        <div class="col-sm-12 col-md-7">
                          <select class="form-control selectric" name="TechnologyPortofolioId" id="">
                            <% technologyData.forEach(function(technologyData) { %>
                            <option value="<%= technologyData.id %>"><%= technologyData.title %></option>
                            <% }); %>
                          </select>
                        </div>
                      </div>
                      <div class="form-group row align-items-center">
                        <label class="form-control-label col-sm-3 text-md-right">Logo</label>
                        <div class="col-sm-12 col-md-7">
                          <div class="custom-file">
                            <input type="file" name="logo" class="custom-file-input" id="logo">
                            <label class="custom-file-label" for="logo">Choose File</label>
                          </div>
                          <div class="form-text text-muted">The image must have a maximum size of 1MB</div>
                        </div>
                      </div>
                      <div class="form-group row mb-4">
                        <label class="col-form-label text-md-right col-12 col-md-3 col-lg-3">Link Web</label>
                        <div class="col-sm-12 col-md-7">
                          <input type="text" class="form-control" name="webLink">
                        </div>
                      </div>
                      <div class="form-group row mb-4">
                        <label class="col-form-label text-md-right col-12 col-md-3 col-lg-3">Link Apps</label>
                        <div class="col-sm-12 col-md-7">
                          <input type="text" class="form-control" name="appsLink">
                        </div>
                      </div>
                      <div class="form-group row align-items-center">
                        <label class="form-control-label col-sm-3 text-md-right">Image</label>
                        <div class="col-sm-12 col-md-7">
                          <div class="custom-file">
                            <input type="file" name="image" class="custom-file-input" id="image">
                            <label class="custom-file-label" for="image">Choose File</label>
                          </div>
                          <div class="form-text text-muted">The image must have a maximum size of 1MB</div>
                        </div>
                      </div>
                      <div class="form-group row mb-4">
                        <label class="col-form-label text-md-right col-12 col-md-3 col-lg-3">Alt Image</label>
                        <div class="col-sm-12 col-md-7">
                          <input type="text" class="form-control" name="altImage">
                        </div>
                      </div>
                      <div class="form-group row">
                        <label class="col-form-label text-md-right col-12 col-md-3 col-lg-3"></label>
                        <div class="col-sm-12 col-md-7">
                          <button class="btn btn-primary" type="submit">Create Portofolio</button>
                        </div>
                      </div>
                    </form>
                  </div>
                </div>
              </div>
            </div>
        </section>
      </div>
  </div>

  <!-- General JS Scripts -->
  <script src="/assets/modules/jquery.min.js"></script>
  <script src="/assets/modules/popper.js"></script>
  <script src="/assets/modules/tooltip.js"></script>
  <script src="/assets/modules/bootstrap/js/bootstrap.min.js"></script>
  <script src="/assets/modules/nicescroll/jquery.nicescroll.min.js"></script>
  <script src="/assets/modules/moment.min.js"></script>
  <script src="/assets/js/stisla.js"></script>

  <!-- Template JS File -->
  <script src="/assets/js/scripts.js"></script>
  <script src="/assets/js/custom.js"></script>

  <script>
    CKEDITOR.replace('body');

    function generateSlug() {
      var title = document.getElementById("titleInput").value;
      var slug = title.toLowerCase().replace(/ /g, '-').replace(/[^\w-]+/g, '');
      document.getElementById("slugInput").value = slug;
    }

    document.getElementById("portofolioForm").addEventListener("submit", function (e) {
      e.preventDefault();

      var formData = new FormData(this);
      var token = localStorage.getItem('token');
      formData.append("token", token);

      fetch("/portofolio", {
        method: "POST",
        body: formData,
      })
        .then(response => {
          if (response.ok) {
            alert("Portofolio created successfully!");
          } else {
            alert("Failed to create portofolio.");
          }
        })
        .catch(error => {
          console.error("Error:", error);
          alert("An error occurred while creating the portofolio.");
        });
    });
  </script>
</body>

</html>
