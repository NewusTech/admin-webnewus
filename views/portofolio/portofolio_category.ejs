<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta content="width=device-width, initial-scale=1, maximum-scale=1, shrink-to-fit=no" name="viewport">
    <title>Components &rsaquo; Table &mdash; Stisla</title>

    <!-- General CSS Files -->
    <link rel="stylesheet" href="/assets/modules/bootstrap/css/bootstrap.min.css">
    <link rel="stylesheet" href="/assets/modules/fontawesome/css/all.min.css">

    <!-- CSS Libraries -->

    <!-- Template CSS -->
    <link rel="stylesheet" href="/assets/css/style.css">
    <link rel="stylesheet" href="/assets/css/components.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/sweetalert2@11/dist/sweetalert2.min.css">
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11/dist/sweetalert2.all.min.js"></script>

    <!-- Start GA -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-94034622-3"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag() { dataLayer.push(arguments); }
        gtag('js', new Date());

        gtag('config', 'UA-94034622-3');
    </script>
    <!-- /END GA -->
</head>

<body>
    <div id="app">
        <!-- Sidebar -->
        <%-include('../sidebar.ejs')-%>
  
        <!-- Main Content -->
        <div class="main-content">
          <section class="section">
            <div class="section-header">
              <h1>Portofolio Category</h1>
              <div class="section-header-button">
                <a href="/portofolio/category/create" class="btn btn-primary">Add New</a>
              </div>
              <div class="section-header-breadcrumb">
                <div class="breadcrumb-item active"><a href="#">Dashboard</a></div>
                <div class="breadcrumb-item"><a href="#">Kelola Portofolio</a></div>
                <div class="breadcrumb-item">Portofolio Category</div>
              </div>
            </div>
            <div class="section-body">
              <h2 class="section-title">Portofolio Category</h2>
              <p class="section-lead">
                You can manage all portofolio category, such as editing, deleting and more.
              </p>
  
              <div class="row mt-4">
                <div class="col-12">
                  <div class="card">
                    <div class="card-header">
                      <h4>All Category</h4>
                    </div>
                    <div class="card-body">
                      <div class="float-left">
                        <select class="form-control selectric">
                          <option>Action For Selected</option>
                          <option>Move to Draft</option>
                          <option>Move to Pending</option>
                          <option>Delete Pemanently</option>
                        </select>
                      </div>
                      <div class="float-right">
                        <form>
                          <div class="input-group">
                            <input type="text" class="form-control" placeholder="Search">
                            <div class="input-group-append">
                              <button class="btn btn-primary"><i class="fas fa-search"></i></button>
                            </div>
                          </div>
                        </form>
                      </div>
                      <div class="table-responsive">
                        <table class="table table-striped">
                          <tr>
                            <th class="text-center pt-2">
                              <div class="custom-checkbox custom-checkbox-table custom-control" >
                                <input type="checkbox" data-checkboxes="mygroup" data-checkbox-role="dad" class="custom-control-input" id="checkbox-all">
                                <label for="checkbox-all" class="custom-control-label">&nbsp;</label>
                              </div>
                            </th>
                            <th>Title</th>
                            <th>Created At</th>
                          </tr>
                          <% portofolioData.forEach(function(portofolio_category) { %>
                          <tr>
                            <td>
                              <div class="custom-checkbox custom-control">
                                <input type="checkbox" data-checkboxes="mygroup" class="custom-control-input" id="checkbox-<%= portofolio_category.id %>">
                                <label for="checkbox-<%= portofolio_category.id %>" class="custom-control-label">&nbsp;</label>
                              </div>
                            </td>
                            <td><%= portofolio_category.title %>
                              <div class="table-links">
                                <a href=" /portofolio/category/detail/<%= portofolio_category.id %>">View</a>
                                <div class="bullet"></div>
                                <a href="/admin/<%= portofolio_category.id %>/portofolio/category">Edit</a>
                                <div class="bullet"></div>
                                <a href="#" class="text-danger" onclick="confirmDelete(<%= portofolio_category.id %>)">Trash</a>
                              </div>
                            </td>
                            <td><%= portofolio_category.createdAt %></td>
                          </tr>
                          <% }); %>
                        </table>
                      </div>
                      <div class="float-right">
                        <nav>
                          <ul class="pagination">
                            <li class="page-item disabled">
                              <a class="page-link" href="#" aria-label="Previous">
                                <span aria-hidden="true">&laquo;</span>
                                <span class="sr-only">Previous</span>
                              </a>
                            </li>
                            <li class="page-item active">
                              <a class="page-link" href="#">1</a>
                            </li>
                            <li class="page-item">
                              <a class="page-link" href="#">2</a>
                            </li>
                            <li class="page-item">
                              <a class="page-link" href="#">3</a>
                            </li>
                            <li class="page-item">
                              <a class="page-link" href="#" aria-label="Next">
                                <span aria-hidden="true">&raquo;</span>
                                <span class="sr-only">Next</span>
                              </a>
                            </li>
                          </ul>
                        </nav>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </section>
        </div>

        <!-- Footer-->
        <%-include('../footer.ejs')-%>
    </div>
  
    <!-- General JS Scripts -->
    <script src="https://cdn.jsdelivr.net/npm/jquery@3.6.0/dist/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js" integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1" crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.nicescroll/3.7.6/jquery.nicescroll.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.24.0/moment.min.js"></script>
    <script src="../assets/js/stisla.js"></script>
  
    <!-- JS Libraies -->
    <script src="../node_modules/selectric/public/jquery.selectric.min.js"></script>
  
    <!-- Template JS File -->
    <script src="../assets/js/scripts.js"></script>
    <script src="../assets/js/custom.js"></script>
  
    <!-- Page Specific JS File -->
    <script src="../assets/js/page/features-posts.js"></script>

    <script>
      function confirmDelete(portofolioId) {
        Swal.fire({
          title: 'Are you sure?',
          text: "You won't be able to revert this!",
          icon: 'warning',
          showCancelButton: true,
          confirmButtonColor: '#3085d6',
          cancelButtonColor: '#d33',
          confirmButtonText: 'Yes, delete it!'
        }).then((result) => {
          if (result.isConfirmed) {
            const token = localStorage.getItem('token');
    
            fetch(`/admin/kategoriportofolio/delete/${portofolioId}`, {
              method: 'DELETE',
              headers: {
                'Content-Type': 'application/json'
              },
              body: JSON.stringify({ token: token })
            })
            .then(response => {
              if (response.ok) {
                Swal.fire(
                  'Deleted!',
                  'Your portofolio category has been deleted.',
                  'success'
                ).then(() => {
                  window.location.reload();
                });
              } else {
                Swal.fire(
                  'Failed!',
                  'There was an error deleting the portofolio category.',
                  'error'
                );
              }
            })
            .catch(error => {
              Swal.fire(
                'Failed!',
                'There was an error deleting the portofolio category.',
                'error'
              );
            });
          }
        });
      }
    </script>
  </body>

</html>